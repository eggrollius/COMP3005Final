<%- include('header') %>

<main>
    <h1>Member Functions</h1>
    
    <section>
        <h2>Login</h2>
        <form id="loginForm">
            <input type="email" name="email" placeholder="Email" required>
            <input type="password" name="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
    </section>

    <section>
        <h2>Add New Member</h2>
        <form action="/api/members" method="POST">
            <input type="text" name="name" placeholder="Name" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="password" name="password" placeholder="Password" required>
            <input type="date" name="dob" placeholder="Date of Birth" required>
            <textarea name="fitness_goals" placeholder="Fitness Goals"></textarea>
            <textarea name="health_metrics" placeholder="Health Metrics"></textarea>
            <button type="submit">Add Member</button>
        </form>
    </section>

    <section>
        <h2>Update Profile</h2>
        <form id="updateProfileForm">
            <input type="email" name="email" placeholder="Your Current Email" required>
            <input type="password" name="password" placeholder="Your Current Password" required>
            <input type="email" name="newEmail" placeholder="New Email (optional)">
            <input type="password" name="newPassword" placeholder="New Password (optional)">
            <input type="date" name="newDob" placeholder="New Date of Birth (optional)">
            <input type="text" name="newName" placeholder="New Name (optional)">
            <fieldset>
                <legend>New Fitness Goals</legend>
                <div id="fitnessGoalsContainer">
                    <!-- Dynamic fitness goals inputs will be added here -->
                </div>
                <button type="button" onclick="addFitnessGoal()">Add Fitness Goal</button>
            </fieldset>
    
            <fieldset>
                <legend>New Health Metrics</legend>
                <div id="healthMetricsContainer">
                    <!-- Dynamic health metrics inputs will be added here -->
                </div>
                <button type="button" onclick="addHealthMetric()">Add Health Metric</button>
            </fieldset>
            <button type="submit">Update Profile</button>
        </form>
    </section>
    
    <section>
        <h2>Book Personal Training Session</h2>
        <form id="bookTrainingSessionForm">
            <input type="email" name="email" placeholder="Your Email" required>
            <input type="password" name="password" placeholder="Your Password" required>
            <label for="trainerSelect">Select Trainer:</label>
            <select id="trainerSelect" name="trainerId" required>
                <option value="">--Please choose a trainer--</option>
                <% trainers.forEach(function(trainer) { %>
                    <option value="<%= trainer.trainer_id %>"><%= trainer.name %> - <%= trainer.specialization %></option>
                <% }); %>
            </select>
            <input type="date" id="sessionDate" name="sessionDate" required>
            <input type="time" id="startTime" name="startTime" required>
            <input type="time" id="endTime" name="endTime" required>
            <button type="submit">Book Session</button>
        </form>
    </section>

    <section>
        <h2>Your Training Sessions</h2>
        <div id="trainingSessionsContainer">
   
        </div>
    </section>

    <section>
        <h2>Join Group Fitness Class</h2>
        <form id="joinFitnessClassForm">
            <input type="email" name="email" placeholder="Your Email" required>
            <input type="password" name="password" placeholder="Your Password" required>
            <label for="classSelect">Select Fitness Class:</label>
            <select id="classSelect" name="classId" required>
                <option value="">--Select a Class--</option>
                <% fitnessClasses.forEach(function(fitnessClass) { %>
                    <option value="<%= fitnessClass.class_id %>"><%= fitnessClass.name %> - <%= fitnessClass.schedule %></option>
                <% }); %>
            </select>
            <button type="submit">Join Class</button>
        </form>
    </section>
    <section>
        <h2>Your fitness classes</h2>
        <div id="fitnessClassContainer"></div>
    </section>
</main>

<%- include('footer') %>
<script src="/js/memberlogin.js"></script>
<script src="/js/updateProfile.js"></script>
<script src="/js/bookTrainingSession.js"></script>
<script src="/js/joinFitnessClass.js"></script>
